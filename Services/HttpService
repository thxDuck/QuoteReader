using System.Net.Http.Headers;
using Microsoft.AspNetCore.Http.Features;

namespace QuoteReader.Services
{
    public class HttpService
    {

        private static string GetUrl (int id) 
        {
            return $"{BaseUrl}{id}.html"
        }

        
        private static string BaseUrl = "https://danstonchat.com/quote/"

        public static async Task<string> FetchQuote(int? Id)
        {
            using HttpClient client = new();
            client.DefaultRequestHeaders.Accept.Clear();
            client.DefaultRequestHeaders.Accept.Add(
                new MediaTypeWithQualityHeaderValue("application/vnd.github.v3+json"));
            client.DefaultRequestHeaders.Add("User-Agent", ".NET Foundation Repository Reporter");

            await ProcessRepositoriesAsync(client);

            static async Task ProcessRepositoriesAsync(HttpClient client)
            {
                string url = GetUrl(id);
                var html = await client.GetStringAsync(url);
                Console.Write(html);
            }

            return new Quote { Id =0, Description = "", Title = "", Viewed = false, PostedDate = DateTime.Now };


        }

    }
}